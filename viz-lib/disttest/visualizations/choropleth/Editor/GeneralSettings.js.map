{"version":3,"sources":["../../../../src/visualizations/choropleth/Editor/GeneralSettings.tsx"],"names":["GeneralSettings","options","data","onOptionsChange","mapType","geoJson","isLoadingGeoJson","geoJsonFields","targetFields","targetField","isString","fieldNames","visualizationsSettings","handleMapChange","choroplethAvailableMaps","_","columns","length","keyColumn","name","field","valueColumn","propTypes","EditorPropTypes"],"mappings":"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","sourcesContent":["import { isString, map, filter, get } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport * as Grid from \"antd/lib/grid\";\nimport { EditorPropTypes } from \"@/visualizations/prop-types\";\nimport { Section, Select } from \"@/components/visualizations/editor\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\n\nimport useLoadGeoJson from \"../hooks/useLoadGeoJson\";\nimport { getGeoJsonFields } from \"./utils\";\n\nexport default function GeneralSettings({ options, data, onOptionsChange }: any) {\n  const [geoJson, isLoadingGeoJson] = useLoadGeoJson(options.mapType);\n  const geoJsonFields = useMemo(() => getGeoJsonFields(geoJson), [geoJson]);\n\n  // While geoJson is loading - show last selected field in select\n  const targetFields = isLoadingGeoJson ? filter([options.targetField], isString) : geoJsonFields;\n\n  const fieldNames = get(visualizationsSettings, `choroplethAvailableMaps.${options.mapType}.fieldNames`, {});\n\n  const handleMapChange = useCallback(\n    mapType => {\n      onOptionsChange({ mapType: mapType || null });\n    },\n    [onOptionsChange]\n  );\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Map\"\n          data-test=\"Choropleth.Editor.MapType\"\n          defaultValue={options.mapType}\n          onChange={handleMapChange}>\n          {map(visualizationsSettings.choroplethAvailableMaps, (_, mapType) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={mapType} data-test={`Choropleth.Editor.MapType.${mapType}`}>\n              {get(visualizationsSettings, `choroplethAvailableMaps.${mapType}.name`, mapType)}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Grid.Row gutter={15}>\n          <Grid.Col span={12}>\n            <Select\n              label=\"Key Column\"\n              className=\"w-100\"\n              data-test=\"Choropleth.Editor.KeyColumn\"\n              disabled={data.columns.length === 0}\n              defaultValue={options.keyColumn}\n              onChange={(keyColumn: any) => onOptionsChange({ keyColumn })}>\n              {map(data.columns, ({ name }) => (\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n                <Select.Option key={name} data-test={`Choropleth.Editor.KeyColumn.${name}`}>\n                  {name}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              ))}\n            </Select>\n          </Grid.Col>\n          <Grid.Col span={12}>\n            <Select\n              label=\"Target Field\"\n              className=\"w-100\"\n              data-test=\"Choropleth.Editor.TargetField\"\n              disabled={isLoadingGeoJson || targetFields.length === 0}\n              loading={isLoadingGeoJson}\n              value={options.targetField}\n              onChange={(targetField: any) => onOptionsChange({ targetField })}>\n              {map(targetFields, field => (\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n                <Select.Option key={field} data-test={`Choropleth.Editor.TargetField.${field}`}>\n                  {fieldNames[field] || field}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              ))}\n            </Select>\n          </Grid.Col>\n        </Grid.Row>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Value Column\"\n          data-test=\"Choropleth.Editor.ValueColumn\"\n          disabled={data.columns.length === 0}\n          defaultValue={options.valueColumn}\n          onChange={(valueColumn: any) => onOptionsChange({ valueColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={`Choropleth.Editor.ValueColumn.${name}`}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n"],"file":"GeneralSettings.js"}