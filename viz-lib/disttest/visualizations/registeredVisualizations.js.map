{"version":3,"sources":["../../src/visualizations/registeredVisualizations.ts"],"names":["VisualizationConfig","PropTypes","shape","type","string","isRequired","name","getOptions","func","isDefault","bool","isDeprecated","Renderer","Editor","autoHeight","defaultRows","number","defaultColumns","minRows","maxRows","minColumns","maxColumns","registeredVisualizations","validateVisualizationConfig","config","typeSpecs","values","checkPropTypes","registerVisualization","Error","boxPlotVisualization","chartVisualization","choroplethVisualization","cohortVisualization","counterVisualization","detailsVisualization","funnelVisualization","mapVisualization","pivotVisualization","sankeyVisualization","sunburstVisualization","tableVisualization","wordCloudVisualization","getDefaultVisualization","visualization","newVisualization","options","description"],"mappings":"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","sourcesContent":["import { find, flatten, each } from \"lodash\";\nimport PropTypes from \"prop-types\";\n\nimport boxPlotVisualization from \"./box-plot\";\nimport chartVisualization from \"./chart\";\nimport choroplethVisualization from \"./choropleth\";\nimport cohortVisualization from \"./cohort\";\nimport counterVisualization from \"./counter\";\nimport detailsVisualization from \"./details\";\nimport funnelVisualization from \"./funnel\";\nimport mapVisualization from \"./map\";\nimport pivotVisualization from \"./pivot\";\nimport sankeyVisualization from \"./sankey\";\nimport sunburstVisualization from \"./sunburst\";\nimport tableVisualization from \"./table\";\nimport wordCloudVisualization from \"./word-cloud\";\n\ntype VisualizationConfig = {\n  type: string;\n  name: string;\n  getOptions: (...args: any[]) => any;\n  isDefault?: boolean;\n  isDeprecated?: boolean;\n  Renderer: (...args: any[]) => any;\n  Editor?: (...args: any[]) => any;\n  autoHeight?: boolean;\n  defaultRows?: number;\n  defaultColumns?: number;\n  minRows?: number;\n  maxRows?: number;\n  minColumns?: number;\n  maxColumns?: number;\n};\n\n// @ts-expect-error ts-migrate(2322) FIXME: Type 'Requireable<InferProps<{ type: Validator<str... Remove this comment to see the full error message\nconst VisualizationConfig: PropTypes.Requireable<VisualizationConfig> = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  getOptions: PropTypes.func.isRequired,\n  isDefault: PropTypes.bool,\n  isDeprecated: PropTypes.bool,\n  Renderer: PropTypes.func.isRequired,\n  Editor: PropTypes.func,\n  // other config options\n  autoHeight: PropTypes.bool,\n  defaultRows: PropTypes.number,\n  defaultColumns: PropTypes.number,\n  minRows: PropTypes.number,\n  maxRows: PropTypes.number,\n  minColumns: PropTypes.number,\n  maxColumns: PropTypes.number,\n});\n\nconst registeredVisualizations = {};\n\nfunction validateVisualizationConfig(config: any) {\n  const typeSpecs = { config: VisualizationConfig };\n  const values = { config };\n  PropTypes.checkPropTypes(typeSpecs, values, \"prop\", \"registerVisualization\");\n}\n\nfunction registerVisualization(config: any) {\n  validateVisualizationConfig(config);\n  config = {\n    Editor: () => null,\n    ...config,\n    isDefault: config.isDefault && !config.isDeprecated,\n  };\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (registeredVisualizations[config.type]) {\n    throw new Error(`Visualization ${config.type} already registered.`);\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  registeredVisualizations[config.type] = config;\n}\n\neach(\n  flatten([\n    boxPlotVisualization,\n    chartVisualization,\n    choroplethVisualization,\n    cohortVisualization,\n    counterVisualization,\n    detailsVisualization,\n    funnelVisualization,\n    mapVisualization,\n    pivotVisualization,\n    sankeyVisualization,\n    sunburstVisualization,\n    tableVisualization,\n    wordCloudVisualization,\n  ]),\n  registerVisualization\n);\n\nexport default registeredVisualizations;\n\nexport function getDefaultVisualization() {\n  // return any visualization explicitly marked as default, or any non-deprecated otherwise\n  return (\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDefault' does not exist on type 'never... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => visualization.isDefault) ||\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDeprecated' does not exist on type 'ne... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => !visualization.isDeprecated)\n  );\n}\n\nexport function newVisualization(type = null, options = {}) {\n  // @ts-expect-error ts-migrate(2538) FIXME: Type 'null' cannot be used as an index type.\n  const visualization = type ? registeredVisualizations[type] : getDefaultVisualization();\n  return {\n    type: visualization.type,\n    name: visualization.name,\n    description: \"\",\n    options,\n  };\n}\n"],"file":"registeredVisualizations.js"}