{"version":3,"sources":["../../../src/visualizations/details/DetailsRenderer.tsx"],"names":["renderValue","value","type","formats","date","visualizationsSettings","dateFormat","datetime","dateTimeFormat","moment","isMoment","format","DetailsRenderer","data","page","setPage","rows","length","types","columns","map","column","name","row","key","p","propTypes","RendererPropTypes"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,WAAT,CAAqBC,KAArB,EAAiCC,IAAjC,EAA4C;AAC1C,MAAMC,OAAO,GAAG;AACdC,IAAAA,IAAI,EAAEC,+CAAuBC,UADf;AAEdC,IAAAA,QAAQ,EAAEF,+CAAuBG;AAFnB,GAAhB;;AAKA,MAAIN,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,UAAhC,EAA4C;AAC1C,QAAIO,gBAAOC,QAAP,CAAgBT,KAAhB,CAAJ,EAA4B;AAC1B;AACA,aAAOA,KAAK,CAACU,MAAN,CAAaR,OAAO,CAACD,IAAD,CAApB,CAAP;AACD;AACF;;AAED,SAAO,KAAKD,KAAZ;AACD;;AAEc,SAASW,eAAT,OAAwC;AAAA,MAAbC,IAAa,QAAbA,IAAa;;AAAA,kBAC7B,qBAAS,CAAT,CAD6B;AAAA;AAAA,MAC9CC,IAD8C;AAAA,MACxCC,OADwC;;AAGrD,MAAI,CAACF,IAAD,IAAS,CAACA,IAAI,CAACG,IAAf,IAAuBH,IAAI,CAACG,IAAL,CAAUC,MAAV,KAAqB,CAAhD,EAAmD;AACjD,WAAO,IAAP;AACD;;AAED,MAAMC,KAAK,GAAG,uBAAU,mBAAML,IAAI,CAACM,OAAX,EAAoB,MAApB,CAAV,EAAuC,MAAvC,CAAd,CAPqD,CASrD;;AACA,MAAMA,OAAO,GAAGN,IAAI,CAACM,OAAL,CAAaC,GAAb,CAAkBC,MAAD,IAAiBA,MAAM,CAACC,IAAzC,CAAhB;AACA,MAAMC,GAAG,GAAGV,IAAI,CAACG,IAAL,CAAUF,IAAV,CAAZ;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,6BAAC,qBAAD;AAAc,IAAA,IAAI,EAAC,OAAnB;AAA2B,IAAA,MAAM,EAAE,CAAnC;AAAsC,IAAA,QAAQ;AAA9C,KACG,iBAAIK,OAAJ,EAAaK,GAAG,iBACf,6BAAC,qBAAD,CAAc,IAAd;AAAmB,IAAA,GAAG,EAAEA,GAAxB;AAA6B,IAAA,KAAK,EAAEA;AAApC,KACGxB,WAAW,CAACuB,GAAG,CAACC,GAAD,CAAJ,EAAWN,KAAK,CAACM,GAAD,CAAhB,CADd,CADD,CADH,CADF,EAQGX,IAAI,CAACG,IAAL,CAAUC,MAAV,GAAmB,CAAnB,iBACC;AAAK,IAAA,SAAS,EAAC;AAAf,kBACE,6BAAC,mBAAD;AACE,IAAA,eAAe,EAAE,KADnB;AAEE,IAAA,OAAO,EAAEH,IAAI,GAAG,CAFlB;AAGE,IAAA,eAAe,EAAE,CAHnB;AAIE,IAAA,KAAK,EAAED,IAAI,CAACG,IAAL,CAAUC,MAJnB;AAKE,IAAA,QAAQ,EAAEQ,CAAC,IAAIV,OAAO,CAACU,CAAC,GAAG,CAAL;AALxB,IADF,CATJ,CADF;AAsBD;;AAEDb,eAAe,CAACc,SAAhB,GAA4BC,4BAA5B","sourcesContent":["import React, { useState } from \"react\";\nimport { map, mapValues, keyBy } from \"lodash\";\nimport moment from \"moment\";\nimport { RendererPropTypes } from \"@/visualizations/prop-types\";\nimport { visualizationsSettings } from \"@/visualizations/visualizationsSettings\";\nimport Descriptions from \"antd/lib/descriptions\";\nimport Pagination from \"antd/lib/pagination\";\n\nimport \"./details.less\";\n\nfunction renderValue(value: any, type: any) {\n  const formats = {\n    date: visualizationsSettings.dateFormat,\n    datetime: visualizationsSettings.dateTimeFormat,\n  };\n\n  if (type === \"date\" || type === \"datetime\") {\n    if (moment.isMoment(value)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return value.format(formats[type]);\n    }\n  }\n\n  return \"\" + value;\n}\n\nexport default function DetailsRenderer({ data }: any) {\n  const [page, setPage] = useState(0);\n\n  if (!data || !data.rows || data.rows.length === 0) {\n    return null;\n  }\n\n  const types = mapValues(keyBy(data.columns, \"name\"), \"type\");\n\n  // We use columsn to maintain order of columns in the view.\n  const columns = data.columns.map((column: any) => column.name);\n  const row = data.rows[page];\n\n  return (\n    <div className=\"details-viz\">\n      <Descriptions size=\"small\" column={1} bordered>\n        {map(columns, key => (\n          <Descriptions.Item key={key} label={key}>\n            {renderValue(row[key], types[key])}\n          </Descriptions.Item>\n        ))}\n      </Descriptions>\n      {data.rows.length > 1 && (\n        <div className=\"paginator-container\">\n          <Pagination\n            showSizeChanger={false}\n            current={page + 1}\n            defaultPageSize={1}\n            total={data.rows.length}\n            onChange={p => setPage(p - 1)}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nDetailsRenderer.propTypes = RendererPropTypes;\n"],"file":"DetailsRenderer.js"}