{"version":3,"sources":["../../../src/visualizations/box-plot/d3box.ts"],"names":["box","width","height","duration","domain","value","Number","whiskers","boxWhiskers","quartiles","boxQuartiles","tickFormat","g","each","d","i","map","sort","d3","ascending","select","n","length","min","max","quartileData","whiskerIndices","call","whiskerData","outlierIndices","range","concat","x1","scale","linear","x0","__chart__","Infinity","center","selectAll","data","enter","insert","attr","style","transition","exit","remove","append","medianLine","whisker","outlier","format","boxTick","text","whiskerTick","timer","flush","x","arguments","functor","quantile"],"mappings":";;;;;;;AAAA;AACA;AACA,SAASA,GAAT,GAAe;AACb,MAAIC,KAAK,GAAG,CAAZ;AAAA,MACEC,MAAM,GAAG,CADX;AAAA,MAEEC,QAAQ,GAAG,CAFb;AAAA,MAGEC,MAAW,GAAG,IAHhB;AAAA,MAIEC,KAAK,GAAGC,MAJV;AAAA,MAKEC,QAAQ,GAAGC,WALb;AAAA,MAMEC,SAAS,GAAGC,YANd;AAAA,MAOEC,UAAe,GAAG,IAPpB,CADa,CAUb;;AACA,WAASX,GAAT,CAAaY,CAAb,EAAqB;AACnBA,IAAAA,CAAC,CAACC,IAAF,CAAO,UAASC,CAAT,EAAiBC,CAAjB,EAAyB;AAC9BD,MAAAA,CAAC,GAAGA,CAAC,CAACE,GAAF,CAAMX,KAAN,EAAaY,IAAb,CAAkBC,EAAE,CAACC,SAArB,CAAJ,CAD8B,CAE9B;;AACA,UAAIP,CAAC,GAAGM,EAAE,CAACE,MAAH,CAAU,IAAV,CAAR;AAAA,UACEC,CAAC,GAAGP,CAAC,CAACQ,MADR;AAAA,UAEEC,GAAG,GAAGT,CAAC,CAAC,CAAD,CAFT;AAAA,UAGEU,GAAG,GAAGV,CAAC,CAACO,CAAC,GAAG,CAAL,CAHT,CAH8B,CAQ9B;;AACA,UAAMI,YAAY,GAAIX,CAAC,CAACL,SAAF,GAAcA,SAAS,CAACK,CAAD,CAA7C,CAT8B,CAW9B;AACA;;AACA,UAAIY,cAAc,GAAGnB,QAAQ,IAAIA,QAAQ,CAACoB,IAAT,CAAc,IAAd,EAAoBb,CAApB,EAAuBC,CAAvB,CAAjC;AAAA,UACEa,WAAW,GAAGF,cAAc,IAAIA,cAAc,CAACV,GAAf,CAAmBD,CAAC,IAAID,CAAC,CAACC,CAAD,CAAzB,CADlC,CAb8B,CAgB9B;AACA;;AACA,UAAMc,cAAc,GAAGH,cAAc,GACjCR,EAAE,CAACY,KAAH,CAAS,CAAT,EAAYJ,cAAc,CAAC,CAAD,CAA1B,EAA+BK,MAA/B,CAAsCb,EAAE,CAACY,KAAH,CAASJ,cAAc,CAAC,CAAD,CAAd,GAAoB,CAA7B,EAAgCL,CAAhC,CAAtC,CADiC,GAEjCH,EAAE,CAACY,KAAH,CAAST,CAAT,CAFJ,CAlB8B,CAsB9B;AACA;;AACA,UAAMW,EAAE,GAAGd,EAAE,CAACe,KAAH,CACRC,MADQ,GAET;AAFS,OAGR9B,MAHQ,CAGAA,MAAM,IAAIA,MAAM,CAACuB,IAAP,CAAY,IAAZ,EAAkBb,CAAlB,EAAqBC,CAArB,CAAX,IAAuC,CAACQ,GAAD,EAAMC,GAAN,CAHtC,EAIRM,KAJQ,CAIF,CAAC5B,MAAD,EAAS,CAAT,CAJE,CAAX,CAxB8B,CA8B9B;;AACA,UAAMiC,EAAE,GACN;AACA,WAAKC,SAAL,IACA;AACAlB,MAAAA,EAAE,CAACe,KAAH,CACGC,MADH,GAEG9B,MAFH,CAEU,CAAC,CAAD,EAAIiC,QAAJ,CAFV,EAGGP,KAHH,CAGSE,EAAE,CAACF,KAAH,EAHT,CAJF,CA/B8B,CAwC9B;AACA;;AACA,WAAKM,SAAL,GAAiBJ,EAAjB,CA1C8B,CA4C9B;AACA;AACA;AACA;AAEA;;AACA,UAAMM,MAAM,GAAG1B,CAAC,CAAC2B,SAAF,CAAY,aAAZ,EAA2BC,IAA3B,CAAgCZ,WAAW,GAAG,CAACA,WAAD,CAAH,GAAmB,EAA9D,CAAf;AAEAU,MAAAA,MAAM,CACHG,KADH,GAEGC,MAFH,CAEU,MAFV,EAEkB,MAFlB,EAGGC,IAHH,CAGQ,OAHR,EAGiB,QAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc1C,KAAK,GAAG,CAJtB,EAKG0C,IALH,CAKQ,IALR,EAKc7B,CAAC,IAAIqB,EAAE,CAACrB,CAAC,CAAC,CAAD,CAAF,CALrB,EAMG6B,IANH,CAMQ,IANR,EAMc1C,KAAK,GAAG,CANtB,EAOG0C,IAPH,CAOQ,IAPR,EAOc7B,CAAC,IAAIqB,EAAE,CAACrB,CAAC,CAAC,CAAD,CAAF,CAPrB,EAQG8B,KARH,CAQS,SART,EAQoB,IARpB,EASGC,UATH,GAUG1C,QAVH,CAUYA,QAVZ,EAWGyC,KAXH,CAWS,SAXT,EAWoB,CAXpB,EAYGD,IAZH,CAYQ,IAZR,EAYc7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAZrB,EAaG6B,IAbH,CAaQ,IAbR,EAac7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAbrB;AAeAwB,MAAAA,MAAM,CACHO,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGyC,KAHH,CAGS,SAHT,EAGoB,CAHpB,EAIGD,IAJH,CAIQ,IAJR,EAIc7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAJrB,EAKG6B,IALH,CAKQ,IALR,EAKc7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CALrB;AAOAwB,MAAAA,MAAM,CACHQ,IADH,GAEGD,UAFH,GAGG1C,QAHH,CAGYA,QAHZ,EAIGyC,KAJH,CAIS,SAJT,EAIoB,IAJpB,EAKE;AALF,OAMGD,IANH,CAMQ,IANR,EAMc7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CANrB,EAOE;AAPF,OAQG6B,IARH,CAQQ,IARR,EAQc7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CARrB,EASGiC,MATH,GA1E8B,CAqF9B;;AACA,UAAM/C,GAAG,GAAGY,CAAC,CAAC2B,SAAF,CAAY,UAAZ,EAAwBC,IAAxB,CAA6B,CAACf,YAAD,CAA7B,CAAZ;AAEAzB,MAAAA,GAAG,CACAyC,KADH,GAEGO,MAFH,CAEU,MAFV,EAGGL,IAHH,CAGQ,OAHR,EAGiB,KAHjB,EAIGA,IAJH,CAIQ,GAJR,EAIa,CAJb,EAKGA,IALH,CAKQ,GALR,EAKa7B,CAAC,IAAIqB,EAAE,CAACrB,CAAC,CAAC,CAAD,CAAF,CALpB,EAMG6B,IANH,CAMQ,OANR,EAMiB1C,KANjB,EAOG0C,IAPH,CAOQ,QAPR,EAOkB7B,CAAC,IAAIqB,EAAE,CAACrB,CAAC,CAAC,CAAD,CAAF,CAAF,GAAWqB,EAAE,CAACrB,CAAC,CAAC,CAAD,CAAF,CAPpC,EAQG+B,UARH,GASG1C,QATH,CASYA,QATZ,EAUGwC,IAVH,CAUQ,GAVR,EAUa7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAVpB,EAWG6B,IAXH,CAWQ,QAXR,EAWkB7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAAF,GAAWkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAXpC;AAaAd,MAAAA,GAAG,CACA6C,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGwC,IAHH,CAGQ,GAHR,EAGa7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAHpB,EAIG6B,IAJH,CAIQ,QAJR,EAIkB7B,CAAC,IAAIkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAAF,GAAWkB,EAAE,CAAClB,CAAC,CAAC,CAAD,CAAF,CAJpC;AAMAd,MAAAA,GAAG,CAAC8C,IAAJ,GAAWC,MAAX,GA3G8B,CA6G9B;;AACA,UAAME,UAAU,GAAGrC,CAAC,CAAC2B,SAAF,CAAY,aAAZ,EAA2BC,IAA3B,CAAgC,CAACf,YAAY,CAAC,CAAD,CAAb,CAAhC,CAAnB;AAEAwB,MAAAA,UAAU,CACPR,KADH,GAEGO,MAFH,CAEU,MAFV,EAGGL,IAHH,CAGQ,OAHR,EAGiB,QAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc,CAJd,EAKGA,IALH,CAKQ,IALR,EAKcR,EALd,EAMGQ,IANH,CAMQ,IANR,EAMc1C,KANd,EAOG0C,IAPH,CAOQ,IAPR,EAOcR,EAPd,EAQGU,UARH,GASG1C,QATH,CASYA,QATZ,EAUGwC,IAVH,CAUQ,IAVR,EAUcX,EAVd,EAWGW,IAXH,CAWQ,IAXR,EAWcX,EAXd;AAaAiB,MAAAA,UAAU,CACPJ,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGwC,IAHH,CAGQ,IAHR,EAGcX,EAHd,EAIGW,IAJH,CAIQ,IAJR,EAIcX,EAJd;AAMAiB,MAAAA,UAAU,CAACH,IAAX,GAAkBC,MAAlB,GAnI8B,CAqI9B;;AACA,UAAMG,OAAO,GAAGtC,CAAC,CAAC2B,SAAF,CAAY,cAAZ,EAA4BC,IAA5B,CAAiCZ,WAAW,IAAI,EAAhD,CAAhB;AAEAsB,MAAAA,OAAO,CACJT,KADH,GAEGC,MAFH,CAEU,MAFV,EAEkB,cAFlB,EAGGC,IAHH,CAGQ,OAHR,EAGiB,SAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc,CAJd,EAKGA,IALH,CAKQ,IALR,EAKcR,EALd,EAMGQ,IANH,CAMQ,IANR,EAMc1C,KANd,EAOG0C,IAPH,CAOQ,IAPR,EAOcR,EAPd,EAQGS,KARH,CAQS,SART,EAQoB,IARpB,EASGC,UATH,GAUG1C,QAVH,CAUYA,QAVZ,EAWGwC,IAXH,CAWQ,IAXR,EAWcX,EAXd,EAYGW,IAZH,CAYQ,IAZR,EAYcX,EAZd,EAaGY,KAbH,CAaS,SAbT,EAaoB,CAbpB;AAeAM,MAAAA,OAAO,CACJL,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGwC,IAHH,CAGQ,IAHR,EAGcX,EAHd,EAIGW,IAJH,CAIQ,IAJR,EAIcX,EAJd,EAKGY,KALH,CAKS,SALT,EAKoB,CALpB;AAOAM,MAAAA,OAAO,CACJJ,IADH,GAEGD,UAFH,GAGG1C,QAHH,CAGYA,QAHZ,EAIGwC,IAJH,CAIQ,IAJR,EAIcX,EAJd,EAKGW,IALH,CAKQ,IALR,EAKcX,EALd,EAMGY,KANH,CAMS,SANT,EAMoB,IANpB,EAOGG,MAPH,GA9J8B,CAuK9B;;AACA,UAAMI,OAAO,GAAGvC,CAAC,CAAC2B,SAAF,CAAY,gBAAZ,EAA8BC,IAA9B,CAAmCX,cAAnC,EAAmDvB,MAAnD,CAAhB;AAEA6C,MAAAA,OAAO,CACJV,KADH,GAEGC,MAFH,CAEU,QAFV,EAEoB,MAFpB,EAGGC,IAHH,CAGQ,OAHR,EAGiB,SAHjB,EAIGA,IAJH,CAIQ,GAJR,EAIa,CAJb,EAKGA,IALH,CAKQ,IALR,EAKc1C,KAAK,GAAG,CALtB,EAMG0C,IANH,CAMQ,IANR,EAMc5B,CAAC,IAAIoB,EAAE,CAACrB,CAAC,CAACC,CAAD,CAAF,CANrB,EAOG6B,KAPH,CAOS,SAPT,EAOoB,IAPpB,EAQGC,UARH,GASG1C,QATH,CASYA,QATZ,EAUGwC,IAVH,CAUQ,IAVR,EAUc5B,CAAC,IAAIiB,EAAE,CAAClB,CAAC,CAACC,CAAD,CAAF,CAVrB,EAWG6B,KAXH,CAWS,SAXT,EAWoB,CAXpB;AAaAO,MAAAA,OAAO,CACJN,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGwC,IAHH,CAGQ,IAHR,EAGc5B,CAAC,IAAIiB,EAAE,CAAClB,CAAC,CAACC,CAAD,CAAF,CAHrB,EAIG6B,KAJH,CAIS,SAJT,EAIoB,CAJpB;AAMAO,MAAAA,OAAO,CACJL,IADH,GAEGD,UAFH,GAGG1C,QAHH,CAGYA,QAHZ,EAIE;AAJF,OAKGwC,IALH,CAKQ,IALR,EAKc5B,CAAC,IAAIiB,EAAE,CAAClB,CAAC,CAACC,CAAD,CAAF,CALrB,EAMG6B,KANH,CAMS,SANT,EAMoB,IANpB,EAOGG,MAPH,GA7L8B,CAsM9B;;AACA,UAAMK,MAAM,GAAGzC,UAAU,IAAIqB,EAAE,CAACrB,UAAH,CAAc,CAAd,CAA7B,CAvM8B,CAyM9B;;AACA,UAAM0C,OAAO,GAAGzC,CAAC,CAAC2B,SAAF,CAAY,UAAZ,EAAwBC,IAAxB,CAA6Bf,YAA7B,CAAhB;AAEA4B,MAAAA,OAAO,CACJZ,KADH,GAEGO,MAFH,CAEU,MAFV,EAGGL,IAHH,CAGQ,OAHR,EAGiB,KAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc,MAJd,EAKGA,IALH,CAKQ,IALR,EAKc,CAAC7B,CAAD,EAAIC,CAAJ,KAAWA,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAC,CALtC,EAMG4B,IANH,CAMQ,GANR,EAMa,CAAC7B,CAAD,EAAIC,CAAJ,KAAWA,CAAC,GAAG,CAAJ,GAAQd,KAAR,GAAgB,CANxC,EAOG0C,IAPH,CAOQ,GAPR,EAOaR,EAPb,EAQGQ,IARH,CAQQ,aARR,EAQuB,CAAC7B,CAAD,EAAIC,CAAJ,KAAWA,CAAC,GAAG,CAAJ,GAAQ,OAAR,GAAkB,KARpD,EASGuC,IATH,CASQF,MATR,EAUGP,UAVH,GAWG1C,QAXH,CAWYA,QAXZ,EAYGwC,IAZH,CAYQ,GAZR,EAYaX,EAZb;AAcAqB,MAAAA,OAAO,CACJR,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGmD,IAHH,CAGQF,MAHR,EAIGT,IAJH,CAIQ,GAJR,EAIaX,EAJb;AAMAqB,MAAAA,OAAO,CAACP,IAAR,GAAeC,MAAf,GAhO8B,CAkO9B;AACA;AACA;;AACA,UAAMQ,WAAW,GAAG3C,CAAC,CAAC2B,SAAF,CAAY,cAAZ,EAA4BC,IAA5B,CAAiCZ,WAAW,IAAI,EAAhD,CAApB;AAEA2B,MAAAA,WAAW,CACRd,KADH,GAEGO,MAFH,CAEU,MAFV,EAGGL,IAHH,CAGQ,OAHR,EAGiB,SAHjB,EAIGA,IAJH,CAIQ,IAJR,EAIc,MAJd,EAKGA,IALH,CAKQ,IALR,EAKc,CALd,EAMGA,IANH,CAMQ,GANR,EAMa1C,KANb,EAOG0C,IAPH,CAOQ,GAPR,EAOaR,EAPb,EAQGmB,IARH,CAQQF,MARR,EASGR,KATH,CASS,SATT,EASoB,IATpB,EAUGC,UAVH,GAWG1C,QAXH,CAWYA,QAXZ,EAYGwC,IAZH,CAYQ,GAZR,EAYaX,EAZb,EAaGY,KAbH,CAaS,SAbT,EAaoB,CAbpB;AAeAW,MAAAA,WAAW,CACRV,UADH,GAEG1C,QAFH,CAEYA,QAFZ,EAGGmD,IAHH,CAGQF,MAHR,EAIGT,IAJH,CAIQ,GAJR,EAIaX,EAJb,EAKGY,KALH,CAKS,SALT,EAKoB,CALpB;AAOAW,MAAAA,WAAW,CACRT,IADH,GAEGD,UAFH,GAGG1C,QAHH,CAGYA,QAHZ,EAIGwC,IAJH,CAIQ,GAJR,EAIaX,EAJb,EAKGY,KALH,CAKS,SALT,EAKoB,IALpB,EAMGG,MANH;AAOD,KApQD,EADmB,CAsQnB;;AACA7B,IAAAA,EAAE,CAACsC,KAAH,CAASC,KAAT;AACD;;AAEDzD,EAAAA,GAAG,CAACC,KAAJ,GAAY,UAASyD,CAAT,EAAiB;AAC3B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOrB,KAAP;AACvBA,IAAAA,KAAK,GAAGyD,CAAR;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACE,MAAJ,GAAa,UAASwD,CAAT,EAAiB;AAC5B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOpB,MAAP;AACvBA,IAAAA,MAAM,GAAGwD,CAAT;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACW,UAAJ,GAAiB,UAAS+C,CAAT,EAAiB;AAChC,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOX,UAAP;AACvBA,IAAAA,UAAU,GAAG+C,CAAb;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACG,QAAJ,GAAe,UAASuD,CAAT,EAAiB;AAC9B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOnB,QAAP;AACvBA,IAAAA,QAAQ,GAAGuD,CAAX;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACI,MAAJ,GAAa,UAASsD,CAAT,EAAiB;AAC5B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOlB,MAAP,CADK,CAE5B;;AACAA,IAAAA,MAAM,GAAGsD,CAAC,IAAI,IAAL,GAAYA,CAAZ,GAAgBxC,EAAE,CAAC0C,OAAH,CAAWF,CAAX,CAAzB;AACA,WAAO1D,GAAP;AACD,GALD;;AAOAA,EAAAA,GAAG,CAACK,KAAJ,GAAY,UAASqD,CAAT,EAAiB;AAC3B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOjB,KAAP;AACvBA,IAAAA,KAAK,GAAGqD,CAAR;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACO,QAAJ,GAAe,UAASmD,CAAT,EAAiB;AAC9B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOf,QAAP;AACvBA,IAAAA,QAAQ,GAAGmD,CAAX;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMAA,EAAAA,GAAG,CAACS,SAAJ,GAAgB,UAASiD,CAAT,EAAiB;AAC/B,QAAI,CAACC,SAAS,CAACrC,MAAf,EAAuB,OAAOb,SAAP;AACvBA,IAAAA,SAAS,GAAGiD,CAAZ;AACA,WAAO1D,GAAP;AACD,GAJD;;AAMA,SAAOA,GAAP;AACD;;AAED,SAASQ,WAAT,CAAqBM,CAArB,EAA6B;AAC3B,SAAO,CAAC,CAAD,EAAIA,CAAC,CAACQ,MAAF,GAAW,CAAf,CAAP;AACD;;AAED,SAASZ,YAAT,CAAsBI,CAAtB,EAA8B;AAC5B,SAAO,CAACI,EAAE,CAAC2C,QAAH,CAAY/C,CAAZ,EAAe,IAAf,CAAD,EAAuBI,EAAE,CAAC2C,QAAH,CAAY/C,CAAZ,EAAe,GAAf,CAAvB,EAA4CI,EAAE,CAAC2C,QAAH,CAAY/C,CAAZ,EAAe,IAAf,CAA5C,CAAP;AACD;;eAEcd,G","sourcesContent":["/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain: any = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat: any = null;\n\n  // For each small multipleâ€¦\n  function box(g: any) {\n    g.each(function(d: any, i: any) {\n      d = d.map(value).sort(d3.ascending);\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = (d.quartiles = quartiles(d));\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n        ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n        : d3.range(n);\n\n      // Compute the new x-scale.\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n      const x1 = d3.scale\n        .linear()\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        .domain((domain && domain.call(this, d, i)) || [min, max])\n        .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 =\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.__chart__ ||\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n        d3.scale\n          .linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll(\"line.center\").data(whiskerData ? [whiskerData] : []);\n\n      center\n        .enter()\n        .insert(\"line\", \"rect\")\n        .attr(\"class\", \"center\")\n        .attr(\"x1\", width / 2)\n        .attr(\"y1\", d => x0(d[0]))\n        .attr(\"x2\", width / 2)\n        .attr(\"y2\", d => x0(d[1]))\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1)\n        .attr(\"y1\", d => x1(d[0]))\n        .attr(\"y2\", d => x1(d[1]));\n\n      center\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1)\n        .attr(\"y1\", d => x1(d[0]))\n        .attr(\"y2\", d => x1(d[1]));\n\n      center\n        .exit()\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1e-6)\n        // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n        .attr(\"y1\", d => x1(d[0]))\n        // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n        .attr(\"y2\", d => x1(d[1]))\n        .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll(\"rect.box\").data([quartileData]);\n\n      box\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"box\")\n        .attr(\"x\", 0)\n        .attr(\"y\", d => x0(d[2]))\n        .attr(\"width\", width)\n        .attr(\"height\", d => x0(d[0]) - x0(d[2]))\n        .transition()\n        .duration(duration)\n        .attr(\"y\", d => x1(d[2]))\n        .attr(\"height\", d => x1(d[0]) - x1(d[2]));\n\n      box\n        .transition()\n        .duration(duration)\n        .attr(\"y\", d => x1(d[2]))\n        .attr(\"height\", d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll(\"line.median\").data([quartileData[1]]);\n\n      medianLine\n        .enter()\n        .append(\"line\")\n        .attr(\"class\", \"median\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", x0)\n        .attr(\"x2\", width)\n        .attr(\"y2\", x0)\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1);\n\n      medianLine\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll(\"line.whisker\").data(whiskerData || []);\n\n      whisker\n        .enter()\n        .insert(\"line\", \"circle, text\")\n        .attr(\"class\", \"whisker\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", x0)\n        .attr(\"x2\", width)\n        .attr(\"y2\", x0)\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1);\n\n      whisker\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1);\n\n      whisker\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1e-6)\n        .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll(\"circle.outlier\").data(outlierIndices, Number);\n\n      outlier\n        .enter()\n        .insert(\"circle\", \"text\")\n        .attr(\"class\", \"outlier\")\n        .attr(\"r\", 5)\n        .attr(\"cx\", width / 2)\n        .attr(\"cy\", i => x0(d[i]))\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1);\n\n      outlier\n        .transition()\n        .duration(duration)\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1);\n\n      outlier\n        .exit()\n        .transition()\n        .duration(duration)\n        // @ts-expect-error ts-migrate(2538) FIXME: Type 'unknown' cannot be used as an index type.\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1e-6)\n        .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll(\"text.box\").data(quartileData);\n\n      boxTick\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"box\")\n        .attr(\"dy\", \".3em\")\n        .attr(\"dx\", (d, i) => (i & 1 ? 6 : -6))\n        .attr(\"x\", (d, i) => (i & 1 ? width : 0))\n        .attr(\"y\", x0)\n        .attr(\"text-anchor\", (d, i) => (i & 1 ? \"start\" : \"end\"))\n        .text(format)\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1);\n\n      boxTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr(\"y\", x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll(\"text.whisker\").data(whiskerData || []);\n\n      whiskerTick\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"whisker\")\n        .attr(\"dy\", \".3em\")\n        .attr(\"dx\", 6)\n        .attr(\"x\", width)\n        .attr(\"y\", x0)\n        .text(format)\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1);\n\n      whiskerTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1);\n\n      whiskerTick\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1e-6)\n        .remove();\n    });\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'flush' does not exist on type '(callback... Remove this comment to see the full error message\n    d3.timer.flush();\n  }\n\n  box.width = function(x: any) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function(x: any) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function(x: any) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function(x: any) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function(x: any) {\n    if (!arguments.length) return domain;\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'functor' does not exist on type 'typeof ... Remove this comment to see the full error message\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function(x: any) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function(x: any) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function(x: any) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d: any) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d: any) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexport default box;\n"],"file":"d3box.js"}